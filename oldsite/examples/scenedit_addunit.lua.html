<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Command Lua Documentation</title>
    <link rel="stylesheet" href="../ldoc_fixed.css" type="text/css" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57524251-1', 'auto');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');

    </script>
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>CommandLua</h1>




<h2>Examples</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../examples/mission1.lua.html">mission1.lua</a></li>
  <li><strong>scenedit_addunit.lua</strong></li>
  <li><a href="../examples/scenedit_mission.lua.html">scenedit_mission.lua</a></li>
</ul>
<h2>Reference</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../index.html">ScenEdit</a></li>
</ul>
<h2>Topics</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../topics/01-getting-started.md.html">01-getting-started</a></li>
  <li><a href="../topics/02-creation.md.html">02-creation</a></li>
  <li><a href="../topics/98-event_handling.md.html">98-event_handling</a></li>
  <li><a href="../topics/99-code-examples.md.html">99-code-examples</a></li>
</ul>

</div>

<div id="content">

    <h2>scenedit_addunit.lua</h2>
<pre>

<span class="keyword">function</span> AddSingleUnit()
	<span class="keyword">local</span> u1 = ScenEdit_AddUnit( {
	<span class="global">type</span>=<span class="string">'ship'</span>,  <span class="comment">-- the type of unit to add
</span>	side=<span class="string">'USN'</span>,   <span class="comment">-- the side to add unit to
</span>	name=<span class="string">'Kennedy'</span>,  <span class="comment">-- the name unit will be shown as
</span>	dbid=<span class="number">2369</span>,     <span class="comment">-- the database id of the unit
</span>	long=-<span class="number">76.109</span>,   <span class="comment">-- longitude to place unit
</span>	lat=<span class="number">37.2</span>,     <span class="comment">-- latitude to place unit
</span>	heading=<span class="number">150</span>   <span class="comment">-- heading of unit
</span>	} )
	<span class="comment">-- check that the function worked. a 'unit' wrapper should be returned
</span>	<span class="keyword">if</span> u1 == <span class="keyword">nil</span> <span class="keyword">then</span>
		<span class="global">print</span>( <span class="string">"failed to add unit"</span>)
	<span class="keyword">else</span>
		<span class="global">print</span>(<span class="string">'added'</span> .. <span class="string">' '</span> .. u1.name)
		u1.group=<span class="string">'TF2.1.2'</span>  <span class="comment">-- add unit to a group. this will also create the group if it doesn't exist.
</span>	<span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">function</span> AddMultipleUnits()
	<span class="comment">-- list of units to add
</span>	<span class="comment">-- there are 2 base types of elements in this table - unit and group
</span>	<span class="comment">-- unit: contains data for adding the unit, and optional group or mission data. the mission data is not used in this example.
</span>	<span class="comment">-- group: contains data for adding some group information. the group is assumed to have been created when it was assigned to a unit
</span>	<span class="keyword">local</span> newUnits = {
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Enterprise'</span>, dbid=<span class="number">272</span>, long=-<span class="number">76.1</span>, lat=<span class="number">37.2</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Yorktown'</span>, dbid=<span class="number">42</span>, long=-<span class="number">75.8890</span>, lat=<span class="number">36.9890</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Truxtun'</span>, dbid=<span class="number">521</span>, long=-<span class="number">76.2</span>, lat=<span class="number">37.3</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'King'</span>, dbid=<span class="number">761</span>, long=-<span class="number">76.15</span>, lat=<span class="number">37</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Underwood'</span>, dbid=<span class="number">116</span>, long=-<span class="number">76.3</span>, lat=<span class="number">37.25</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{unit={<span class="global">type</span>=<span class="string">'ship'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Wichita'</span>, dbid=<span class="number">1812</span>, long=-<span class="number">76.09</span>, lat=<span class="number">37.21</span>, heading=<span class="number">150</span> } ,group=<span class="string">'TF2.1.2'</span>},
	{group={side=<span class="string">'USN'</span>, name=<span class="string">'TF2.1.2'</span>,course={{latitude=<span class="string">'37.0999'</span>, longitude=<span class="string">'-76.0879'</span>},{latitude=<span class="string">'36.8526'</span>, longitude=<span class="string">'-75.5157'</span>}}}},
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Tomcat #1'</span>, dbid=<span class="number">10</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">754</span>}, mission=<span class="string">'CAP'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Tomcat #2'</span>, dbid=<span class="number">10</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">754</span>}, mission=<span class="string">'CAP'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Tomcat #3'</span>, dbid=<span class="number">10</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">754</span>}, mission=<span class="string">'CAP'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Tomcat #4'</span>, dbid=<span class="number">10</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">754</span>}, mission=<span class="string">'CAP'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Hornet #1'</span>, dbid=<span class="number">47</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">44</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Hornet #2'</span>, dbid=<span class="number">47</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">44</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Hornet #3'</span>, dbid=<span class="number">47</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">44</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Hornet #4'</span>, dbid=<span class="number">47</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">44</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Intruder #1'</span>, dbid=<span class="number">221</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">73</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Intruder #2'</span>, dbid=<span class="number">221</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">73</span>} },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'SeaHawk #1'</span>, dbid=<span class="number">237</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">56</span>}, mission=<span class="string">'ASW patrol'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'SeaHawk #2'</span>, dbid=<span class="number">237</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">56</span>}, mission=<span class="string">'ASW patrol'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'SeaHawk #3'</span>, dbid=<span class="number">237</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">56</span>}, mission=<span class="string">'ASW patrol'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'SeaHawk #4'</span>, dbid=<span class="number">237</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">56</span>}, mission=<span class="string">'ASW patrol'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Sea King #1'</span>, dbid=<span class="number">55</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">7</span>}, mission=<span class="string">'ASW strike'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Sea King #2'</span>, dbid=<span class="number">55</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">7</span>}, mission=<span class="string">'ASW strike'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Sea King #3'</span>, dbid=<span class="number">55</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">7</span>}, mission=<span class="string">'ASW strike'</span> },
	{unit={<span class="global">type</span>=<span class="string">'aircraft'</span>, side=<span class="string">'USN'</span>, name=<span class="string">'Sea King #4'</span>, dbid=<span class="number">55</span>, base=<span class="string">'Enterprise'</span>,LoadoutID=<span class="number">7</span>}, mission=<span class="string">'ASW strike'</span> },

	}
	<span class="comment">-- process the table, adding the units to the scenario
</span>	<span class="keyword">for</span> i = <span class="number">1</span>, #newUnits, <span class="number">1</span> <span class="keyword">do</span>
	  <span class="comment">-- the table element .unit contains data??
</span>	  <span class="keyword">if</span> newUnits[i].unit ~= <span class="keyword">nil</span> <span class="keyword">then</span>
		<span class="global">print</span>(<span class="string">'adding #'</span> .. i .. <span class="string">' '</span> .. newUnits[i].unit.name)
		<span class="comment">-- the table element .unit contains the data to pass as the parameter to the SE_AddUnit() function
</span>		<span class="keyword">local</span> u1 = ScenEdit_AddUnit( newUnits[i].unit )
		<span class="comment">-- check that the function worked. a 'unit' wrapper should be returned
</span>		<span class="keyword">if</span> u1 == <span class="keyword">nil</span> <span class="keyword">then</span>
			<span class="global">print</span>( <span class="string">"failed to add unit"</span>)
		<span class="keyword">else</span>
			<span class="comment">-- does the same table entry contain an element .group. this is the group to assign unit to
</span>			<span class="keyword">if</span> newUnits[i].group ~= <span class="keyword">nil</span> <span class="keyword">then</span>
			  u1.group=newUnits[i].group	<span class="comment">-- this will also create the group if it doesn't exist.
</span>			<span class="keyword">end</span>
		<span class="keyword">end</span>
	  <span class="keyword">elseif</span> newUnits[i].group ~= <span class="keyword">nil</span> <span class="keyword">then</span>
		<span class="global">print</span>(<span class="string">'adding #'</span> .. i .. <span class="string">' '</span> .. newUnits[i].group.name)
		<span class="comment">-- update the group with the data from the table
</span>		<span class="keyword">local</span> u1 = ScenEdit_SetUnit( newUnits[i].group )
		<span class="keyword">if</span> u1 == <span class="keyword">nil</span> <span class="keyword">then</span>
			<span class="global">print</span>( <span class="string">"failed to add unit"</span>)
		<span class="keyword">end</span>
	  <span class="keyword">end</span>
	<span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment">-- run the functions
</span>AddSingleUnit()

AddMultipleUnits()

<span class="comment">--[[
Output:
added Kennedy
adding #1 Enterprise
adding #2 Yorktown
adding #3 Truxtun
adding #4 King
adding #5 Underwood
adding #6 Wichita
adding #7 TF2.1.2
adding #8 Tomcat #1
adding #9 Tomcat #2
adding #10 Tomcat #3
adding #11 Tomcat #4
adding #12 Hornet #1
adding #13 Hornet #2
adding #14 Hornet #3
adding #15 Hornet #4
adding #16 Intruder #1
adding #17 Intruder #2
adding #18 SeaHawk #1
adding #19 SeaHawk #2
adding #20 SeaHawk #3
adding #21 SeaHawk #4
adding #22 Sea King #1
adding #23 Sea King #2
adding #24 Sea King #3
adding #25 Sea King #4
--]]</span></pre>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.3</a></i>
<i style="float:right;">Last updated 2019-07-14 11:32:36 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
